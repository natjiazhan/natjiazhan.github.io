---
layout: single
title: "Time Domain Reflectometry (TDR) Properties, Semiconductor Industry Failure Analysis Applications, and Implementation on FPGA"
date: 2025-05-15
author: Nathan Zhang
categories: [blog]
tags: [tdr, fa]
---

In this report, we will explain the physics and math behind TDR, including how impedance mismatches cause signal reflections and how timing is used to determine fault locations. Then, we will explore how TDR is applied in semiconductor failure analysis. Finally, we will explain how TDR can be implemented on an FPGA and the potential hurdles that must be addressed.

## Principles of TDR

TDR is a technique that is used to detect and locate impedance changes along an electrical path by injecting a fast pulse and observing reflections (discontinuities) in the time domain. We can compare it to radar where a pulse is launched, and any echo we receive after tells us there is a change or fault. In both cases, we can use the time delay between the signal/pulse launch and the echo reception to calculate where the discontinuity is.

TDR operates on transmission line principles: a fast-rising voltage pulse is injected into a conductive line, and any change in the line's characteristic impedance causes a portion of the signal to reflect back. If the line is uniform at characteristic impedance $$Z_0$$, the injected pulse is completely absorbed with no reflections. When a pulse encounters a discontinuity, a reflection will be observed. The magnitude and polarity of this reflected wave are defined by the reflection coefficient $$\rho$$, which is calculated mathematically for a line with characteristic impedance $$Z_0$$ and load impedance $$Z_L$$ using the equation: 

$$
\rho = \frac{Z_L - Z_0}{Z_L + Z_0}
$$

as seen in transmission line theory [^1]. This value ranges from -1 to +1. A $$\rho$$ of 0 means that there is no reflection, which indicates a perfectly matched load and no discontinuity. A positive reflection coefficient indicates that the reflection wave is in-phase (same polarity) with the incident pulse, and a negative coefficient indicates that the reflection wave has inverse polarity to the incident pulse. Notably, an open circuit ($$Z_L=\infty$$) yields $$\rho=+1$$, a full positive reflection. A short circuit ($$Z_L=0$$) yields $$\rho=-1$$, a full negative reflection. This means that when looking at the waveform, the TDR trace will rise upward for an open and dip downward for a short relative to the incident pulse level [^1]. Less extreme impedance mismatches will produce smaller hills and valleys. 

**INSERT IMAGE HERE

**Short vs Open TDR waveforms:** A TDR trace(green) will jump downward for a short circuit (upper left) and upward for an open circuit (upper left). A load with the same impedance absorbs the signal with no reflection (upper right), while a mismatched impedance produces a slight reflection (lower right) whose magnitude is proportional to the difference in load and characteristic impedance. 

When a reflection is observed, the time delay between launching the pulse and receiving the reflection can be used to determine where along the line the fault is located. The signal travels along the line at a known velocity $$v$$ which will be a fraction of the speed of light $$c$$. By measuring the round trip travel time $$\Delta t$$, the distance from the source to the impedance change can be calculated using the formula:

$$
d = \frac{v \cdot \Delta t}{2}
$$

since the pulse covers the distance twice (to the fault and back). For example, if a pulse reflects 10 ns after launch where the signal travels at $$2/3 c$$, the discontinuity is approximately 1 meter from the launch point. For semiconductors, since the density of electronics is much higher, the delays are much shorter (in the picoseconds). That's *really* darn fast. So, modern TDR tools used for Failure Analysis (FA) in semiconductors pinpoint faults at the scale of centimeters, millimeters, or even microns. 

TDR spatial resolution is limited by the rise time of the incident signal. A faster rise time allows the TDR tool to distinguish between two closely spaced discontinuities, while a slower rise time would blur them together into one big discontinuity blob. Generally, the minimum resolvable distance between two faults is around half of the system rise time. If two impedance changes occur within a time separation shorter than:

$$
d_{\text{min}} \approx \frac{v \cdot T_{\text{rise}}}{2}
$$, 

their reflections will overlap and appear as one combined disturbance on the waveform. If we have a super fast rise time of 35 ps, the pulse would yield a very fine resolution- small impedance changes like connector imperfections that would appear as small stubs would become very visible bumps. But a 1 ns rise time would smooth over all these details [^1]. Here, we can see a trade-off. Faster edges give more detail, but also make the TDR waveform more sensitive to every tiny discontinuity, whereas slower edges average out the small imperfections.

## Applications of TDR in Semiconductor Failure Analysis

Because semiconductors are complex and expensive to produce, a single defect in a wafer or die can lead to the loss of thousands of dollars in both materials and time. Failure analysis methods such as FIB and TEM (which requires FIB preparation) take away material which irreversibly alters the structure of the sample. TDR is especially useful because it can quickly pinpoint where an electrical connection is open or shorted without physically damaging the part. TDR can localize defects in all the main regions of a packaged IC- the on-chip interconnect (die metallization or bump connections), the package substrate, or the package-to-board interconnects [^2]. It is effective for ball-grid-array (BGA) packages as well as wire-bonded packages, and it can even be used on fully assembled boards. Testing lines in such a way offers a non-invasive way to "see" inside an IC package which is very valuable. This is especially important when working with expensive or limited-quantity samples where physical disassembly isn't an option.

TDR's visual waveform effectively creates a one-dimensional impedance map of the signal path. By analyzing the amplitude and timing of reflection steps, we can deduce both the type of fault (open vs short) as well as the position of the fault. These faults typically appear as sharp transitions in the TDR waveform— an indicator we discussed above. By measuring the time it takes for a reflection to return, engineers can pinpoint the exact location of the discontinuity, all without having to physically open up the device. TDR is equally effective at the board level, allowing analysis of PCB traces, connectors, or vias without needing to desolder components or disassemble the system.

What makes TDR especially powerful is that it doesn't just tell you *where* the fault is—it also gives insight into *what kind* of fault you're dealing with. A large positive reflection generally indicates an open circuit, such as a cracked solder joint or a broken interconnect. A strong negative reflection points to a short, like a solder bridge or internal breakdown. More subtle impedance mismatches show up as smaller deviations in the waveform and could indicate voids, delaminations, or constricted signal paths. This ability to both locate and classify faults adds valuable precision to the failure analysis process—before anything is physically altered.

TDR also plays an important role in guiding destructive analysis. Once a fault is located, destructive techniques like FIB or TEM can be used with more precision, focusing only on the suspected failure site. This reduces unnecessary sample damage and speeds up root-cause identification. 

In short, TDR offers a fast, informative, and minimally invasive way to zero in on electrical defects.

## TDR Implementation on FPGA

