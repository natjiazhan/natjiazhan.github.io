---
layout: single
title: "Time Domain Reflectometry (TDR) Properties, Semiconductor Industry Failure Analysis Applications, and Implementation on FPGA"
date: 2025-05-15
author: Nathan Zhang
categories: [blog]
tags: [tdr, fa]
---

In this report, we will explain the physics and math behind TDR, including how impedance mismatches cause signal reflections and how timing is used to determine fault locations. Then, we will explore how TDR is applied in semiconductor failure analysis. Finally, we will explain how TDR can be implemented on an FPGA and the potential hurdles that must be addressed.

## Principles of TDR

TDR is a technique that is used to detect and locate impedance changes along an electrical path by injecting a fast pulse and observing reflections (discontinuities) in the time domain. We can compare it to radar where a pulse is launched, and any echo we receive after tells us there is a change or fault. In both cases, we can use the time delay between the signal/pulse launch and the echo reception to calculate where the discontinuity is.

TDR operates on transmission line principles: a fast-rising voltage pulse is injected into a conductive line, and any change in the line's characteristic impedance causes a portion of the signal to reflect back. If the line is uniform at characteristic impedance $$Z_0$$, the injected pulse is completely absorbed with no reflections. When a pulse encounters a discontinuity, a reflection will be observed. The magnitude and polarity of this reflected wave are defined by the reflection coefficient $$\rho$$, which is calculated mathematically for a line with characteristic impedance $$Z_0$$ and load impedance $$Z_L$$ using the equation: 

$$
\rho = \frac{Z_L - Z_0}{Z_L + Z_0}
$$

as seen in transmission line theory [^1]. This value ranges from -1 to +1. A $$\rho$$ of 0 means that there is no reflection, which indicates a perfectly matched load and no discontinuity. A positive reflection coefficient indicates that the reflection wave is in-phase (same polarity) with the incident pulse, and a negative coefficient indicates that the reflection wave has inverse polarity to the incident pulse. Notably, an open circuit ($$Z_L=\infty$$) yields $$\rho=+1$$, a full positive reflection. A short circuit ($$Z_L=0$$) yields $$\rho=-1$$, a full negative reflection. This means that when looking at the waveform, the TDR trace will rise upward for an open and dip downward for a short relative to the incident pulse level [^1]. Less extreme impedance mismatches will produce smaller hills and valleys. 

**INSERT IMAGE HERE
**INSERT IMAGE**

Short vs Open TDR waveforms: A TDR trace(green) will jump downward for a short circuit (upper left) and upward for an open circuit (upper left). A load with the same impedance absorbs the signal with no reflection (upper right), while a mismatched impedance produces a slight reflection (lower right) whose magnitude is proportional to the difference in load and characteristic impedance. 

When a reflection is observed, the time delay between launching the pulse and receiving the reflection can be used to determine where along the line the fault is located. The signal travels along the line at a known velocity $$v$$ which will be a fraction of the speed of light $$c$$. By measuring the round trip travel time $$\Delta t$$, the distance from the source to the impedance change can be calculated using the formula:

$$
d = \frac{v \cdot \Delta t}{2}
$$

since the pulse covers the distance twice (to the fault and back). For example, if a pulse reflects 10 ns after launch where the signal travels at $$2/3 c$$, the discontinuity is approximately 1 meter from the launch point. For semiconductors, since the density of electronics is much higher, the delays are much shorter (in the picoseconds). That's really darn fast. So, modern TDR tools used for Failure Analysis (FA) in semiconductors pinpoint faults at the scale of centimeters, millimeters, or even microns. 

TDR spatial resolution is limited by the rise time of the incident signal. A faster rise time allows the TDR tool to distinguish between two closely spaced discontinuities, while a slower rise time would blur them together into one big discontinuity blob. Generally, the minimum resolvable distance between two faults is around half of the system rise time. If two impedance changes occur within a time separation shorter than $$d_{\text{min}} \approx \frac{v \cdot T_{\text{rise}}}{2}$$, their reflections will overlap and appear as one combined disturbance on the waveform. If we have a super fast rise time of 35 ps, the pulse would yield a very fine resolution- small impedance changes like connector imperfections that would appear as small stubs would become very visible bumps. But a 1 ns rise time would smooth over all these details [^1]. Here, we can see a trade-off. Faster edges give more detail, but also make the TDR waveform more sensitive to every tiny discontinuity, whereas slower edges average out the small imperfections.

## Applications of TDR in Semiconductor Failure Analysis


