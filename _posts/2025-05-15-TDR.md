---
layout: single
title: "Time Domain Reflectometry (TDR) Properties, Semiconductor Industry Failure Analysis Applications, and Implementation on FPGA"
date: 2025-05-13
author: Nathan Zhang
categories: [blog]
tags: [tdr, fa]
---

In this report, we will explain the physics and math behind TDR, including how impedance mismatches cause signal reflections and how timing is used to determine fault locations. Then, we will explore how TDR is applied in semiconductor failure analysis. Finally, we will explain how TDR can be implemented on an FPGA and the potential hurdles that must be addressed.

## Principles of TDR

TDR is a technique that is used to detect and locate impedance changes along an electrical path by injecting a fast pulse and observing reflections (discontinuities) in the time domain. We can compare it to radar where a pulse is launched, and any echo we receive after tells us there is a change or fault. In both cases, we can use the time delay between the signal/pulse launch and the echo reception to calculate where the discontinuity is.

TDR operates on transmission line principles: a fast-rising voltage pulse is injected into a conductive line, and any change in the line's characteristic impedance causes a portion of the signal to reflect back. If the line is uniform at characteristic impedance $$Z_0$$, the injected pulse is completely absorbed with no reflections. When a pulse encounters a discontinuity, a reflection will be observed. The magnitude and polarity of this reflected wave are defined by the reflection coefficient $$\rho$$, which is calculated mathematically for a line with characteristic impedance $$Z_0$$ and load impedance $$Z_L$$ using the equation: $$\rho=(Z_L-Z_0)/(Z_L+Z_0)$$, as seen in transmission line theory [^1]. This value ranges from -1 to +1. A $$\rho$$ of 0 means that there is no reflection, which indicates a perfectly matched load and no discontinuity. A positive reflection coefficient indicates that the reflection wave is in-phase (same polarity) with the incident pulse, and a negative coefficient indicates that the reflection wave has inverse polarity to the incident pulse. Notably, an open circuit ($$Z_L=\infty$$) yields $$\rho=+1$$, a full positive reflection. A short circuit ($$Z_L=0$$) yields $$\rho=-1$$, a full negative reflection. This means that when looking at the waveform, the TDR trace will rise upward for an open and dip downward for a short relative to the incident pulse level [^1]. Less extreme impedance mismatches will produce smaller hills and valleys. 

INSERT IMAGE HERE

Short vs Open TDR waveforms: A TDR trace(green) will jump downward for a short circuit (upper left) and upward for an open circuit (upper left). A load with the same impedance absorbs the signal with no reflection (upper right), while a mismatched impedance produces a slight reflection (lower right) whose magnitude is proportional to the difference in load and characteristic impedance. 

When a reflection is observed, the time delay between launching the pulse and receiving the reflection can be used to determine where along the line the fault is located. The signal travels along the line at a known velocity $$v$$ which will be a fraction of the speed of light $$c$$. By measuring the round trip travel time $$\Delta t$$, the distance from the source to the impedance change can be calculated using the formula: $$d=v*\Delta t/2$$
